<div class="container">
  <button class="back-btn" (click)="goBack()">â† Volver a Cursos</button>

  <div class="header">
    <h2 class="title">ğŸ“š {{ courseName }}</h2>
    <p class="subtitle">Registro de Asistencia</p>
    <p class="date-badge">ğŸ“… {{ currentDate }}</p>
  </div>

  <!-- Alerta de Ã©xito -->
  <div class="alert alert-success" *ngIf="savedSuccessfully">
    âœ… Asistencia registrada correctamente (simulaciÃ³n)
  </div>

  <!-- Resumen despuÃ©s de guardar -->
  <div class="summary-card" *ngIf="showSummary">
    <h3>ğŸ“Š Resumen de Asistencia</h3>
    <div class="summary-stats">
      <div class="stat-box stat-present">
        <span class="stat-number">{{ getPresentCount() }}</span>
        <span class="stat-label">Presentes</span>
      </div>
      <div class="stat-box stat-absent">
        <span class="stat-number">{{ getAbsentCount() }}</span>
        <span class="stat-label">Ausentes</span>
      </div>
      <div class="stat-box stat-percentage">
        <span class="stat-number">{{ getAttendancePercentage() }}%</span>
        <span class="stat-label">Asistencia</span>
      </div>
    </div>
    <button class="btn-reset" (click)="resetAttendance()">
      ğŸ”„ Nuevo Registro
    </button>
  </div>

  <!-- Controles de selecciÃ³n -->
  <div class="controls" *ngIf="!showSummary">
    <button class="btn-control" (click)="selectAll()">âœ“ Marcar Todos</button>
    <button class="btn-control" (click)="deselectAll()">âœ— Desmarcar Todos</button>
    <div class="stats">
      <span class="stat-present">Presentes: {{ getPresentCount() }}</span>
      <span class="stat-absent">Ausentes: {{ getAbsentCount() }}</span>
    </div>
  </div>

  <!-- Lista de estudiantes con checkbox -->
  <div class="students-container" *ngIf="!showSummary">
    <div 
      class="student-card" 
      *ngFor="let student of students"
      [class.present]="student.present"
      (click)="toggleAttendance(student)">
      
      <div class="checkbox-wrapper">
        <input 
          type="checkbox" 
          [checked]="student.present"
          (click)="$event.stopPropagation()">
        <span class="checkmark" [class.checked]="student.present"></span>
      </div>

      <div class="student-icon">ğŸ‘¤</div>
      
      <div class="student-info">
        <h3 class="student-name">{{ student.fullName }}</h3>
        <p class="student-code">CÃ³digo: {{ student.code }}</p>
      </div>

      <div class="status-badge">
        <span *ngIf="student.present" class="badge-present">âœ“ Presente</span>
        <span *ngIf="!student.present" class="badge-absent">âœ— Ausente</span>
      </div>
    </div>
  </div>

  <!-- BotÃ³n guardar -->
  <div class="save-section" *ngIf="!showSummary">
    <button class="btn-save" (click)="saveAttendance()">
      ğŸ’¾ Registrar Asistencia
    </button>
  </div>

  <!-- Lista de estudiantes despuÃ©s de guardar (solo lectura) -->
  <div class="students-container readonly" *ngIf="showSummary">
    <div 
      class="student-card" 
      *ngFor="let student of students"
      [class.present]="student.present">
      
      <div class="student-icon">ğŸ‘¤</div>
      
      <div class="student-info">
        <h3 class="student-name">{{ student.fullName }}</h3>
        <p class="student-code">CÃ³digo: {{ student.code }}</p>
      </div>

      <div class="status-badge">
        <span *ngIf="student.present" class="badge-present">âœ“ Presente</span>
        <span *ngIf="!student.present" class="badge-absent">âœ— Ausente</span>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="students.length === 0">
    <p>ğŸ“­ No hay estudiantes matriculados en este curso</p>
  </div>
</div>
