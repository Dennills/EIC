<div class="profile-container">
  <div class="profile-header">
    <h2 class="title">ğŸ‘¤ Mi Perfil</h2>
    <p class="subtitle">Gestiona tu informaciÃ³n personal y configuraciÃ³n</p>
  </div>

  <!-- Mensajes -->
  <div class="alert alert-success" *ngIf="saveMessage">
    {{ saveMessage }}
  </div>

  <div class="alert alert-error" *ngIf="errorMessage">
    âš ï¸ {{ errorMessage }}
  </div>

  <div class="profile-grid">
    <!-- Tarjeta de InformaciÃ³n -->
    <div class="profile-card">
      <div class="card-header">
        <h3>InformaciÃ³n Personal</h3>
        <button class="btn-edit" (click)="toggleEdit()" [disabled]="isEditing">
          {{ isEditing ? 'âœï¸ Editando...' : 'âœï¸ Editar Perfil' }}
        </button>
      </div>

      <div class="profile-avatar">
        <div class="avatar-circle">{{ getInitials() }}</div>
        <div class="avatar-info">
          <h4>{{ user?.username }}</h4>
          <p class="role-badge">ğŸ“ Profesor</p>
        </div>
      </div>

      <div class="profile-details" *ngIf="!isEditing">
        <div class="detail-row">
          <span class="detail-label">ğŸ‘¤ Usuario:</span>
          <span class="detail-value">{{ user?.username }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ“§ Email:</span>
          <span class="detail-value">{{ user?.email || 'No registrado' }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ­ Rol:</span>
          <span class="detail-value">Profesor</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ“… Miembro desde:</span>
          <span class="detail-value">Noviembre 2024</span>
        </div>
      </div>

      <!-- Formulario de EdiciÃ³n -->
      <form class="edit-form" *ngIf="isEditing" (ngSubmit)="saveProfile()">
        <div class="form-group">
          <label>ğŸ‘¤ Nombre de Usuario</label>
          <input 
            type="text" 
            [(ngModel)]="editForm.username" 
            name="username"
            placeholder="Ingresa tu nombre de usuario"
            required>
        </div>

        <div class="form-group">
          <label>ğŸ“§ Email</label>
          <input 
            type="email" 
            [(ngModel)]="editForm.email" 
            name="email"
            placeholder="correo@ejemplo.com">
        </div>

        <div class="divider">
          <span>Cambiar ContraseÃ±a (Opcional)</span>
        </div>

        <div class="form-group">
          <label>ğŸ”’ ContraseÃ±a Actual</label>
          <input 
            type="password" 
            [(ngModel)]="editForm.currentPassword" 
            name="currentPassword"
            placeholder="Ingresa tu contraseÃ±a actual"
            autocomplete="current-password">
        </div>

        <div class="form-group">
          <label>ğŸ”‘ Nueva ContraseÃ±a</label>
          <input 
            type="password" 
            [(ngModel)]="editForm.newPassword" 
            name="newPassword"
            placeholder="MÃ­nimo 6 caracteres"
            autocomplete="new-password">
        </div>

        <div class="form-group">
          <label>ğŸ”‘ Confirmar Nueva ContraseÃ±a</label>
          <input 
            type="password" 
            [(ngModel)]="editForm.confirmPassword" 
            name="confirmPassword"
            placeholder="Repite la nueva contraseÃ±a"
            autocomplete="new-password">
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-save">ğŸ’¾ Guardar Cambios</button>
          <button type="button" class="btn-cancel" (click)="toggleEdit()">âœ• Cancelar</button>
        </div>
      </form>
    </div>

    <!-- EstadÃ­sticas -->
    <div class="stats-card">
      <div class="card-header">
        <h3>ğŸ“Š EstadÃ­sticas</h3>
      </div>

      <div class="stats-grid">
        <div class="stat-box">
          <div class="stat-icon">ğŸ“š</div>
          <div class="stat-content">
            <span class="stat-number">{{ stats.totalCourses }}</span>
            <span class="stat-label">Cursos Activos</span>
          </div>
        </div>

        <div class="stat-box">
          <div class="stat-icon">ğŸ‘¥</div>
          <div class="stat-content">
            <span class="stat-number">{{ stats.totalStudents }}</span>
            <span class="stat-label">Estudiantes</span>
          </div>
        </div>

        <div class="stat-box">
          <div class="stat-icon">â³</div>
          <div class="stat-content">
            <span class="stat-number">{{ stats.pendingEvaluations }}</span>
            <span class="stat-label">Pendientes</span>
          </div>
        </div>

        <div class="stat-box">
          <div class="stat-icon">âœ…</div>
          <div class="stat-content">
            <span class="stat-number">{{ stats.completedEvaluations }}</span>
            <span class="stat-label">Completadas</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Actividad Reciente -->
    <div class="activity-card">
      <div class="card-header">
        <h3>ğŸ•’ Actividad Reciente</h3>
      </div>

      <div class="activity-list">
        <div class="activity-item">
          <span class="activity-icon">ğŸ“„</span>
          <div class="activity-content">
            <p class="activity-text">EvaluaciÃ³n  en PrÃ¡cticas Preprofesionales</p>
            <span class="activity-time"></span>
          </div>
        </div>

        <div class="activity-item">
          <span class="activity-icon">âœ…</span>
          <div class="activity-content">
            <p class="activity-text">Asistencia registrada en Control y Calidad de software</p>
            <span class="activity-time"></span>
          </div>
        </div>

        <div class="activity-item">
          <span class="activity-icon">ğŸ‘¤</span>
          <div class="activity-content">
            <p class="activity-text">Perfil actualizado</p>
            <span class="activity-time">Hoy</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
